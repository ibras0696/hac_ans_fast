# Система загрузки файлов для активностей

## Описание

Система позволяет загружать изображения для активностей с автоматическим сохранением в папку `app/static/uploads/` и генерацией уникальных имен файлов.

## Функциональность

### Поддерживаемые форматы
- JPG/JPEG
- PNG
- GIF
- WebP
- SVG

### Ограничения
- Максимальный размер файла: 5MB
- Автоматическая валидация на стороне клиента и сервера

### Структура файлов
```
app/static/
├── uploads/          # Загруженные изображения
├── default_image.svg # Изображение по умолчанию
└── ansar.png        # Логотип
```

## Как это работает

1. **Загрузка файла**: Пользователь выбирает файл через форму
2. **Валидация**: Проверяется тип и размер файла
3. **Сохранение**: Файл сохраняется с уникальным именем в `app/static/uploads/`
4. **База данных**: Путь к файлу сохраняется в поле `images` таблицы `activities`

## Пути к файлам

- Загруженные файлы: `/static/uploads/{unique_filename}`
- Изображение по умолчанию: `/static/default_image.svg`

## Безопасность

- Генерация уникальных имен файлов (UUID)
- Валидация типов файлов
- Ограничение размера файлов
- Проверка на пустые файлы

## Обработка ошибок

- При ошибке загрузки используется изображение по умолчанию
- Пользователю показываются информативные сообщения об ошибках
- Логирование ошибок в консоль

## Использование в шаблонах

```html
<!-- Отображение изображения активности -->
<img src="{{ activity.images }}" alt="{{ activity.title }}" onerror="this.src='/static/default_image.svg'">
```

## Технические детали

- Файлы сохраняются в бинарном режиме
- Используется `uuid.uuid4()` для генерации уникальных имен
- Поддержка асинхронной загрузки через FastAPI
- Автоматическое создание папки uploads при необходимости 